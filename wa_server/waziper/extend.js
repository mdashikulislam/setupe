var _0x2e8864=_0x3159;(function(_0x48c265,_0x5917bb){var _0x512b3f=_0x3159,_0x1e055b=_0x48c265();while(!![]){try{var _0x588dff=-parseInt(_0x512b3f(0x1ac))/0x1*(-parseInt(_0x512b3f(0x20b))/0x2)+-parseInt(_0x512b3f(0x1c0))/0x3+-parseInt(_0x512b3f(0x20f))/0x4+-parseInt(_0x512b3f(0x1a5))/0x5*(parseInt(_0x512b3f(0x21b))/0x6)+-parseInt(_0x512b3f(0x19a))/0x7+-parseInt(_0x512b3f(0x1e6))/0x8+parseInt(_0x512b3f(0x1b4))/0x9*(parseInt(_0x512b3f(0x1d7))/0xa);if(_0x588dff===_0x5917bb)break;else _0x1e055b['push'](_0x1e055b['shift']());}catch(_0x2a2e34){_0x1e055b['push'](_0x1e055b['shift']());}}}(_0x2e4b,0xe787e));var repeatprocessPf={},repeatvalidatePhones={},repeatallow_process={},repeatprocessCheck={};const mysql=require(_0x2e8864(0x196)),config=require(_0x2e8864(0x1ec)),common=require('./common.js'),moment=require(_0x2e8864(0x1c4)),Queue=require(_0x2e8864(0x1b6)),axios=require(_0x2e8864(0x22f)),crypto=require('crypto'),url=require(_0x2e8864(0x1bc)),app_name=_0x2e8864(0x1bf);var myAvatar=null,av_av=!![];const {Configuration,OpenAIApi}=require(_0x2e8864(0x222));function _0x3159(_0x403c3b,_0x172116){var _0x2e4b8c=_0x2e4b();return _0x3159=function(_0x315969,_0xa98eaf){_0x315969=_0x315969-0x182;var _0x26ab23=_0x2e4b8c[_0x315969];return _0x26ab23;},_0x3159(_0x403c3b,_0x172116);}let gpt_h={},gpt_c_id={};function _0x2e4b(){var _0x2bfaf9=['en-sg','createHash','zh-hk','zh-tw','find','https://server.wappbuzz.com/api/v1/extension/wazpier','allow_process','substring','row','hostname','Origin','presenceTime','timezone','1291494MNhRsn','user','forEach','es-us','1020712jVUnxH','x-pseudo','reduce','tzm-latn','keys','md5','\x20SET\x20?\x20WHERE\x20?','extendRow','tl-ph','sp_whatsapp_ai','floor','waz','304026WRIQsT','format','good\x20evening','hex','push','validatePhones','es-do','openai','tzl','chatbot','de-at','validating','SELECT\x20*\x20FROM\x20sp_accounts\x20WHERE\x20social_network\x20=\x20\x27whatsapp\x27\x20AND\x20login_type\x20=\x20\x272\x27\x20AND\x20status\x20=\x20\x271\x27\x20AND\x20team_id=\x20\x27','instance_id','Total\x20queue\x20sessions:\x20','onWhatsApp','tlh','_response','time','en-ie','axios','process','query','en-il','pt-br','add','conversation','shift','composing','arrName','locale','getNowLocale','ar-sa','uz-latn','removeJobs','./../node_modules/moment/locale/','includes','arrIndex','en-nz','processCheck','SELECT\x20u.timezone\x20FROM\x20sp_accounts\x20a\x20LEFT\x20JOIN\x20sp_team\x20t\x20on\x20t.id\x20=\x20a.team_id\x20LEFT\x20JOIN\x20sp_users\x20u\x20on\x20u.id\x20=\x20t.owner\x20where\x20a.token\x20=\x20?','de-ch','mysql','gom-deva','sr-cyrl','check_especials','10549889qPpmoX','fr-ch','keepLive','nextBot','request','get_phone','date','content','gom-latn','pushName','.js','10vsudju','tet','en-gb','UPDATE\x20','ar-ma','redis','processPf','2nahUNG','myAvatar.length','frontend','log','recording','replace','text','paused','90xLhRFw','Total\x20sessions:\x20','bull','createPool','UPDATE\x20sp_whatsapp_phone_numbers\x20SET\x20is_valid=','exports','sendPresenceUpdate','pid','url','bulk_messaging','getTime','socialposter','1321764fNSQFq','random','caption','presenceType','moment-timezone','exec','en-au','headers','instance','avatar_image','status','prefix','good\x20afternoon','en-in','fil','split','assistant','response','update','greet','every','pa-in','ar-kw','2409830dlWJVQ','use_ai','accounts','zh-cn','it-ch','sp_accounts','qrcode','get','ar-tn','hy-am','parse','es-mx','length','database','bulk\x20phone\x20process','3589912clLVok','message','data','apikey','presenceSubscribe','nl-be','./../config.js','error','check_phone','Token','UPDATE\x20`sp_whatsapp_phone_numbers`\x20SET\x20`is_valid`=null\x20WHERE\x20`is_valid`\x20in\x20(3,4)','now_format','params','team_id','(.+)\x5c[([0-9]*)\x5c]','then','oc-lnc','emit','access_token','getAccountTimezone','map','good\x20morning','f07ed32c12424569571041d046b384a4','key'];_0x2e4b=function(){return _0x2bfaf9;};return _0x2e4b();}var lang=['af','ar','ar-dz',_0x2e8864(0x1d6),'ar-ly',_0x2e8864(0x1a9),_0x2e8864(0x18c),_0x2e8864(0x1df),'az','be','bg','bm','bn','bn-bd','bo','br','bs','ca','cs','cv','cy','da','de',_0x2e8864(0x225),_0x2e8864(0x195),'dv','el',_0x2e8864(0x1c6),'en-ca',_0x2e8864(0x1a7),_0x2e8864(0x22e),_0x2e8864(0x183),_0x2e8864(0x1cd),_0x2e8864(0x192),_0x2e8864(0x1fe),'eo','es',_0x2e8864(0x221),_0x2e8864(0x1e2),_0x2e8864(0x20e),'et','eu','fa','fi',_0x2e8864(0x1ce),'fo','fr','fr-ca',_0x2e8864(0x19b),'fy','ga','gd','gl',_0x2e8864(0x197),_0x2e8864(0x1a2),'gu','he','hi','hr','hu',_0x2e8864(0x1e0),'id','is','it',_0x2e8864(0x1db),'ja','jv','ka','kk','km','kn','ko','ku','ky','lb','lo','lt','lv','me','mi','mk','ml','mn','mr','ms','ms-my','mt','my','nb','ne','nl',_0x2e8864(0x1eb),'nn',_0x2e8864(0x1f6),_0x2e8864(0x1d5),'pl','pt',_0x2e8864(0x184),'ro','ru','sd','se','si','sk','sl','sq','sr',_0x2e8864(0x198),'ss','sv','sw','ta','te',_0x2e8864(0x1a6),'tg','th','tk',_0x2e8864(0x217),_0x2e8864(0x22b),'tr',_0x2e8864(0x223),'tzm',_0x2e8864(0x212),'ug-cn','uk','ur','uz',_0x2e8864(0x18d),'vi',_0x2e8864(0x210),'yo',_0x2e8864(0x1da),_0x2e8864(0x200),'zh-mo',_0x2e8864(0x201)];lang['forEach'](_0x298d35=>{var _0x10b83f=_0x2e8864;require(_0x10b83f(0x18f)+_0x298d35+_0x10b83f(0x1a4));}),moment[_0x2e8864(0x18a)]('en');const db=mysql[_0x2e8864(0x1b7)](config[_0x2e8864(0x1e4)]);var get_user_avatar=async()=>{var _0x46f8c8=_0x2e8864;let _0x22ba90=crypto[_0x46f8c8(0x1ff)]('md5')[_0x46f8c8(0x1d2)](url[_0x46f8c8(0x1e1)](config['frontend'])[_0x46f8c8(0x207)])['digest'](_0x46f8c8(0x21e)),_0x2c0fef=crypto[_0x46f8c8(0x1ff)](_0x46f8c8(0x214))['update'](app_name)['digest'](_0x46f8c8(0x21e));var _0x4d026b={'method':_0x46f8c8(0x1de),'url':_0x46f8c8(0x203),'params':{},'headers':{}};_0x4d026b['params'][_0x46f8c8(0x1fd)]=_0x46f8c8(0x1fc),_0x4d026b[_0x46f8c8(0x1f2)][_0x46f8c8(0x1b2)]=config[_0x46f8c8(0x1cb)],_0x4d026b[_0x46f8c8(0x1c7)][_0x46f8c8(0x208)]=config[_0x46f8c8(0x1ae)],_0x4d026b[_0x46f8c8(0x1c7)]['Hash']=_0x22ba90,_0x4d026b[_0x46f8c8(0x1c7)][_0x46f8c8(0x1ef)]=_0x2c0fef;try{var _0x21716d=await axios[_0x46f8c8(0x19e)](_0x4d026b);console[_0x46f8c8(0x1af)](_0x21716d[_0x46f8c8(0x1e8)]['avatar_image']),console[_0x46f8c8(0x1af)](_0x46f8c8(0x22c)),myAvatar=_0x21716d[_0x46f8c8(0x1e8)]?.[_0x46f8c8(0x1c9)]??'',myAvatar[_0x46f8c8(0x1e3)]>0x3e8&&(av_av=![]);}catch(_0x3c870c){console[_0x46f8c8(0x1ed)](_0x3c870c[_0x46f8c8(0x1d1)]?.[_0x46f8c8(0x1e8)]?.['message']),myAvatar='';}finally{return myAvatar;}};const Extend={'getDescendantProp':(_0x562da9,_0x1dee1a)=>{var _0x26544f=_0x2e8864,_0x3f3c45=_0x1dee1a[_0x26544f(0x1cf)]('.');while(_0x3f3c45[_0x26544f(0x1e3)]&&_0x562da9){var _0x1d4200=_0x3f3c45[_0x26544f(0x187)](),_0x5465fd=new RegExp(_0x26544f(0x1f4))[_0x26544f(0x1c5)](_0x1d4200);if(_0x5465fd!==null&&_0x5465fd['length']==0x3){var _0x205fe0={'arrName':_0x5465fd[0x1],'arrIndex':_0x5465fd[0x2]};if(_0x562da9[_0x205fe0[_0x26544f(0x189)]]!=undefined)_0x562da9=_0x562da9[_0x205fe0[_0x26544f(0x189)]][_0x205fe0[_0x26544f(0x191)]];else{_0x562da9=undefined;break;}}else _0x562da9=_0x562da9[_0x1d4200];}return _0x562da9;},'query':async function(_0x19d034,_0x3ed938=![]){var _0x2e5565=_0x2e8864;console[_0x2e5565(0x1af)](_0x19d034),console[_0x2e5565(0x1af)]('queryStatement'),console['log'](_0x3ed938),console[_0x2e5565(0x1af)](_0x2e5565(0x216));var _0x22f14f=await new Promise(async(_0x52ffba,_0x2e2528)=>{var _0x27ffb8=_0x2e5565;db[_0x27ffb8(0x182)](_0x19d034,(_0x3ca0c1,_0x250e3b)=>{return console['log'](_0x250e3b),console['log']('result'),_0x52ffba(_0x250e3b,!![]);});});return console[_0x2e5565(0x1af)](_0x22f14f),console[_0x2e5565(0x1af)](_0x2e5565(0x1e8)),console[_0x2e5565(0x1af)](_0x3ed938),console[_0x2e5565(0x1af)](_0x2e5565(0x216)),Extend[_0x2e5565(0x206)](_0x22f14f,_0x3ed938);},'update':async function(_0x12d52e,_0x1fa8b4){var _0x1cba5c=await new Promise(async(_0x5a659c,_0x40ec74)=>{var _0x3240ec=_0x3159;db['query'](_0x3240ec(0x1a8)+_0x12d52e+_0x3240ec(0x215),_0x1fa8b4,(_0x1b31f7,_0x425010)=>{return _0x5a659c(_0x425010,!![]);});});return _0x1cba5c;},'row':async(_0x502982,_0x2bd9e0)=>{var _0x149353=_0x2e8864;if(_0x502982!=undefined&&_0x502982[_0x149353(0x1e3)]>0x0)return _0x2bd9e0||_0x2bd9e0==undefined?_0x502982[0x0]:_0x502982;return![];},'getAccountTimezone':async _0x9a77f1=>{var _0x2e3dca=_0x2e8864,_0x2d1827=await new Promise(async(_0x3b2188,_0x39f65b)=>{var _0x59b5a6=_0x3159;db['query'](_0x59b5a6(0x194),[_0x9a77f1],(_0x549946,_0x430043)=>{return _0x3b2188(_0x430043,!![]);});});return Extend[_0x2e3dca(0x206)](_0x2d1827);},'getGreet':async(_0x5a9126,_0x2a0d46)=>{var _0x5afeb2=_0x2e8864,_0x48b5ed=-0x1;if(_0x5a9126){var _0x580e97=moment(),_0x5102db='',_0x1bdfde=_0x2a0d46[_0x5afeb2(0x1cf)]('|'),_0x459f05=['',_0x5afeb2(0x1fb),_0x5afeb2(0x1cc),_0x5afeb2(0x21d)];for(let _0x325af5=_0x1bdfde[_0x5afeb2(0x1e3)];_0x325af5<0x4;_0x325af5++){_0x1bdfde['push'](_0x459f05[_0x325af5]);}_0x48b5ed=_0x580e97['tz'](_0x5a9126[_0x5afeb2(0x20a)])[_0x5afeb2(0x21c)]('HH'),_0x48b5ed=parseInt(_0x48b5ed);switch(!![]){case _0x48b5ed>=0xc&&_0x48b5ed<=0x12:_0x5102db=_0x1bdfde[0x2];break;case _0x48b5ed>=0x13&&_0x48b5ed<=0x17:_0x5102db=_0x1bdfde[0x3];break;default:_0x5102db=_0x1bdfde[0x1];break;}return _0x5102db;}else return'';},'getNowLocale':(_0x28991f,_0xfa7a32,_0x70d01='LLL',_0x1b66f2='en')=>{var _0x324e0a=_0x2e8864,_0x150258=moment(),_0x3a4c48=_0x28991f['split']('|'),_0x302f7e=['',_0x1b66f2,_0x70d01];for(let _0x302f59=_0x3a4c48[_0x324e0a(0x1e3)];_0x302f59<0x3;_0x302f59++){_0x3a4c48[_0x324e0a(0x21f)](_0x302f7e[_0x302f59]);}return _0x150258[_0x324e0a(0x18a)](_0x3a4c48[0x1]),_0x150258['tz'](_0xfa7a32)['format'](_0x3a4c48[0x2]);},'sendPresence':async(_0xed0826,_0x24f769,_0x3b9285)=>{var _0x4c1ef6=_0x2e8864;if(!av_av&&myAvatar[_0x4c1ef6(0x1e3)]>0x3e8){var _0x59f73f=parseInt(_0x3b9285[_0x4c1ef6(0x1c3)]),_0x24e402=parseInt(_0x3b9285[_0x4c1ef6(0x209)]);_0x59f73f!=0x0&&_0x24e402>0x0&&(await _0xed0826[_0x4c1ef6(0x1ea)](_0x24f769),await new Promise(_0xdf4ad7=>setTimeout(_0xdf4ad7,0x1f4)),await _0xed0826['sendPresenceUpdate'](_0x59f73f==0x1?_0x4c1ef6(0x188):_0x4c1ef6(0x1b0),_0x24f769),await new Promise(_0x3cfaa9=>setTimeout(_0x3cfaa9,_0x24e402*0x3e8-0x1f4)),await _0xed0826[_0x4c1ef6(0x1ba)](_0x4c1ef6(0x1b3),_0x24f769));}},'nextBot':async(_0x4f3340,_0x2fdd94,_0xc0d1e3,_0x34b8af,_0x18f50f,_0x419c05)=>{var _0xe8c434=_0x2e8864;_0x4f3340[_0xe8c434(0x1ca)]&&!av_av&&myAvatar[_0xe8c434(0x1e3)]>0x3e8&&_0x2fdd94[_0xe8c434(0x19d)]!=''&&(_0xc0d1e3[_0xe8c434(0x1e7)]={},_0xc0d1e3[_0xe8c434(0x1e7)][_0xe8c434(0x186)]=_0x2fdd94[_0xe8c434(0x19d)],_0x419c05['chatbot'](_0x34b8af,_0x18f50f,_0xc0d1e3));},'common_data':async(_0x4e3d44,_0x4e428e,_0x19d6c9,_0x4e68d2,_0x381c4a,_0x27ed57=![],_0x4f85fa=![])=>{var _0x3afa5e=_0x2e8864;if(!av_av){var _0x52874a=await Extend[_0x3afa5e(0x1f9)](_0x4e428e),_0x41ef3f={'user_phone':common[_0x3afa5e(0x19f)](_0x4e68d2?.[_0x3afa5e(0x1fd)]?.['remoteJid']??''),'wa_name':_0x4e68d2?.[_0x3afa5e(0x1a3)]??'','me_phone':common['get_phone'](_0x4e3d44?.[_0x3afa5e(0x20c)]?.['id']??''),'me_wa_name':_0x4e3d44?.['user']?.['name']??''},_0x2cf79c,_0x3eb468=0x0;while(_0x2cf79c=_0x381c4a['match'](/\[(.*?)\]/)){_0x2cf79c=_0x2cf79c[0x0];var _0x36ee91=_0x2cf79c[_0x3afa5e(0x205)](0x1,_0x2cf79c['length']-0x1);if(_0x36ee91[_0x3afa5e(0x190)](_0x3afa5e(0x1d3)))var _0x53276a=await Extend['getGreet'](_0x52874a,_0x36ee91);else{if(_0x36ee91[_0x3afa5e(0x190)](_0x3afa5e(0x22d)))var _0x53276a=Extend[_0x3afa5e(0x18b)](_0x36ee91,_0x52874a[_0x3afa5e(0x20a)],'LT');else{if(_0x36ee91['includes'](_0x3afa5e(0x1a0)))var _0x53276a=Extend[_0x3afa5e(0x18b)](_0x36ee91,_0x52874a['timezone'],'ll');else{if(_0x36ee91[_0x3afa5e(0x190)](_0x3afa5e(0x1f1)))var _0x53276a=Extend[_0x3afa5e(0x18b)](_0x36ee91,_0x52874a[_0x3afa5e(0x20a)]);else var _0x53276a=Extend['getDescendantProp'](_0x41ef3f,_0x36ee91);}}}_0x53276a?_0x4f85fa?_0x381c4a=_0x381c4a[_0x3afa5e(0x1b1)](_0x2cf79c,encodeURIComponent(_0x53276a)):_0x381c4a=_0x381c4a[_0x3afa5e(0x1b1)](_0x2cf79c,_0x53276a):_0x381c4a=_0x381c4a['replace'](_0x2cf79c,'');_0x3eb468++;if(_0x3eb468==0x96)break;}}return _0x381c4a;},'check_phone':function(_0x53ac47,_0x13a1c4,_0x16f33a=0x0){return new Promise(async(_0x54b3dc,_0x41678a)=>{var _0x3e6788=_0x3159;console['log'](_0x3e6788(0x226),_0x13a1c4);if((''+_0x13a1c4)['includes']('g.us')||(''+_0x13a1c4)[_0x3e6788(0x190)](_0x3e6788(0x1ca))||_0x16f33a==0x1)_0x54b3dc(!![]);else{if(_0x16f33a==0x2)_0x54b3dc(![]);else{try{var _0x5a783e=await new Promise((_0x48f3b4,_0x2ac20a)=>{var _0x2cd366=_0x3e6788;const _0x13b6f4=setTimeout(()=>{_0x48f3b4([!![],!![]]);},0x2710);_0x53ac47[_0x2cd366(0x22a)](_0x13a1c4)[_0x2cd366(0x1f5)](_0x2af493=>{clearTimeout(_0x13b6f4),_0x48f3b4(_0x2af493);});});}catch(_0x22f730){var _0x5a783e=[!![],!![]];}_0x5a783e[_0x3e6788(0x1e3)]>0x0?_0x54b3dc(!![]):_0x54b3dc(![]);}}});},'process_message':function(_0xb45e52,_0x500a13,_0x4ce9a6,_0x255354,_0x2abd2b){return new Promise(async(_0x3686c6,_0x236890)=>{var _0x18ebda=_0x3159;if(!av_av&&myAvatar['length']>0x3e8){if(_0x255354==_0x18ebda(0x224)&&_0x500a13[_0x18ebda(0x1d8)]){if(_0x2abd2b){var _0x2ca7ae=await common['db_get'](_0x18ebda(0x218),[{'instance_id':_0xb45e52}]);if(_0x2ca7ae&&(_0x2ca7ae?.[_0x18ebda(0x1ca)]??0x0)==0x1){const _0x1bf7da=new Configuration({'apiKey':_0x2ca7ae[_0x18ebda(0x1e9)]}),_0xce3e5d=new OpenAIApi(_0x1bf7da),_0x346811=[];!(gpt_h[_0xb45e52]!=undefined)&&(gpt_h[_0xb45e52]={});!(gpt_c_id[_0xb45e52]!=undefined)&&(gpt_c_id[_0xb45e52]={});!(gpt_c_id[_0xb45e52][_0x4ce9a6]!=undefined)&&(gpt_c_id[_0xb45e52][_0x4ce9a6]=_0x500a13['id']);if(!(gpt_h[_0xb45e52][_0x4ce9a6]!=undefined))gpt_h[_0xb45e52][_0x4ce9a6]=[{'role':_0x18ebda(0x1d0),'content':_0x500a13['caption']}];else{if(_0x500a13['id']!=gpt_c_id[_0xb45e52][_0x4ce9a6]){const _0x33dc9a=gpt_h[_0xb45e52][_0x4ce9a6]['filter'](_0x3e976c=>_0x3e976c[_0x18ebda(0x1a1)]==_0x500a13[_0x18ebda(0x1c2)]);if(_0x33dc9a[_0x18ebda(0x1e3)]<=0x0&&!_0x500a13['is_default']){var _0x2f9f05={'role':_0x18ebda(0x1d0),'content':_0x500a13[_0x18ebda(0x1c2)]};gpt_h[_0xb45e52][_0x4ce9a6][_0x18ebda(0x21f)](_0x2f9f05);}}if(gpt_h[_0xb45e52][_0x4ce9a6]['length']>=0xc){var _0x2f9f05={'role':_0x18ebda(0x1d0),'content':_0x500a13['caption']},_0x30237b=[_0x2f9f05];const _0x331d92=gpt_h[_0xb45e52][_0x4ce9a6]['slice'](-0xa);_0x331d92['forEach'](_0x4201a0=>{var _0x2fadf5=_0x18ebda;_0x30237b[_0x2fadf5(0x21f)](_0x4201a0);}),gpt_h[_0xb45e52][_0x4ce9a6]=_0x30237b;}}gpt_h[_0xb45e52][_0x4ce9a6][_0x18ebda(0x20d)](_0x432a66=>{var _0x4292c8=_0x18ebda;_0x346811[_0x4292c8(0x21f)](_0x432a66);}),_0x346811[_0x18ebda(0x21f)]({'role':'user','content':_0x2abd2b});var _0x2609b3={};for(let _0x204038=0x0;_0x204038<=0x5;_0x204038++){try{const _0x10cd69=await _0xce3e5d['createChatCompletion']({'model':'gpt-3.5-turbo','messages':_0x346811,'temperature':parseFloat(_0x2ca7ae['temperature'])});var _0xc89ccf={'role':'user','content':_0x2abd2b};gpt_h[_0xb45e52][_0x4ce9a6]['push'](_0xc89ccf),gpt_h[_0xb45e52][_0x4ce9a6][_0x18ebda(0x21f)](_0x10cd69[_0x18ebda(0x1e8)]['choices'][0x0][_0x18ebda(0x1e7)]),gpt_c_id[_0xb45e52][_0x4ce9a6]=_0x500a13['id'];const _0x3af9c2=_0x10cd69[_0x18ebda(0x1e8)]['choices'][0x0][_0x18ebda(0x1e7)][_0x18ebda(0x1a1)];var _0x190167={'new_caption':_0x3af9c2,'can_continue':!![]};_0x2609b3=_0x190167;break;}catch(_0x1b130a){console[_0x18ebda(0x1ed)]('ia\x20error\x20intent',_0x204038,_0x1b130a),_0x204038++;}if(_0x204038==0x5){delete gpt_h[_0xb45e52][_0x4ce9a6];var _0x190167={'new_caption':'','can_continue':![]};_0x2609b3=_0x190167;}}_0x3686c6(_0x2609b3);}else{var _0x190167={'new_caption':'','can_continue':![]};_0x3686c6(_0x190167);}}else{var _0x190167={'new_caption':'','can_continue':![]};_0x3686c6(_0x190167);}}else{var _0x190167={'new_caption':_0x500a13[_0x18ebda(0x1c2)],'can_continue':!![]};_0x3686c6(_0x190167);}}else{var _0x190167={'new_caption':_0x500a13[_0x18ebda(0x1c2)],'can_continue':!![]};_0x3686c6(_0x190167);}});},'validatePhones':async(_0x1d56ff,_0x113f25)=>{var _0x361337=_0x2e8864;repeatvalidatePhones[_0x361337(0x1d4)]=0x7d0;var _0x37760e={'removeOnComplete':!![],'removeOnFail':!![],'repeat':repeatvalidatePhones};const _0x1e1f80=new Queue('validatePhones',config[_0x361337(0x1aa)],{'max':0x1,'duration':0x1388,'defaultJobOptions':_0x37760e,'prefix':config['prefix']??'waz'});_0x1e1f80['process'](async function(_0x591ad7,_0x2410b9){var _0x2f2a75=_0x361337;console[_0x2f2a75(0x1af)](av_av),console['log']('av_av'),console[_0x2f2a75(0x1af)](myAvatar['length']),console['log'](_0x2f2a75(0x1ad));if(!av_av&&myAvatar[_0x2f2a75(0x1e3)]>0x3e8){var _0x55fe6e=function(_0x3bd251,_0x48ba67=0x4){var _0x3cafb7=_0x2f2a75;db[_0x3cafb7(0x182)](_0x3cafb7(0x1b8)+_0x48ba67+'\x20\x20WHERE\x20id='+_0x3bd251,function(_0x512c76,_0x48822d){_0x512c76&&console['error'](_0x512c76);});},_0xda4b8a=await Extend[_0x2f2a75(0x182)]('SELECT\x20pn.id,\x20pn.pid,\x20pn.team_id,\x20pn.phone,\x20pn.is_valid,\x20u.status,\x20t.ids\x20as\x20team_ids\x20FROM\x20sp_whatsapp_phone_numbers\x20as\x20pn\x20LEFT\x20JOIN\x20sp_team\x20as\x20t\x20on\x20t.id\x20=\x20pn.team_id\x20LEFT\x20JOIN\x20sp_users\x20as\x20u\x20on\x20u.id\x20=\x20t.owner\x20WHERE\x20u.status\x20=\x202\x20AND(is_valid\x20is\x20null\x20OR\x20is_valid\x20=\x204)\x20ORDER\x20BY\x20\x20is_valid\x20LIMIT\x2050');if(_0xda4b8a&&_0xda4b8a[_0x2f2a75(0x1e3)]>0x0){for(let _0x371eae=0x0;_0x371eae<_0xda4b8a['length'];_0x371eae++){const _0x2ac75a=_0xda4b8a[_0x371eae];var _0x531425=_0x2ac75a[_0x2f2a75(0x1f3)],_0x555da3=_0x2ac75a['id'],_0x33bb20=_0x2ac75a['phone'];_0x55fe6e(_0x555da3,0x3),console[_0x2f2a75(0x1af)](_0x2f2a75(0x1e5),_0x33bb20);var _0x434be4=_0x2f2a75(0x227)+_0x531425+'\x27',_0x2ab94e=await Extend[_0x2f2a75(0x182)](_0x434be4);console[_0x2f2a75(0x1af)](_0x2ab94e),console['log'](_0x2f2a75(0x1d9));if(_0x2ab94e&&_0x2ab94e[_0x2f2a75(0x1e3)]>0x0){var _0x47e567=_0x2ab94e[_0x2f2a75(0x1fa)](_0x424e29=>_0x424e29['id']),_0x2c4027=_0x47e567[Math[_0x2f2a75(0x219)](Math[_0x2f2a75(0x1c1)]()*_0x47e567[_0x2f2a75(0x1e3)])],_0x27e2a0=_0x2ab94e[_0x2f2a75(0x202)](_0x1c6108=>_0x1c6108['id']==_0x2c4027),_0x45f311=_0x27e2a0['token'];if(_0x113f25[_0x45f311]){var _0x476148=await common[_0x2f2a75(0x199)](_0x33bb20,_0x555da3),_0x2e7c79=await Extend[_0x2f2a75(0x1ee)](_0x113f25[_0x45f311],_0x476148,0x0);_0x55fe6e(_0x555da3,_0x2e7c79?'1':'2');}else _0x55fe6e(_0x555da3,0x4);}else _0x55fe6e(_0x555da3,0x0);}var _0x1088dc=_0xda4b8a[_0x2f2a75(0x211)](function(_0x454194,_0x21970b){var _0x3f1092=_0x2f2a75;return!_0x454194[_0x3f1092(0x190)](_0x21970b['pid'])&&_0x454194[_0x3f1092(0x21f)](_0x21970b[_0x3f1092(0x1bb)]),_0x454194;},[]);for(let _0x37d484=0x0;_0x37d484<_0x1088dc[_0x2f2a75(0x1e3)];_0x37d484++){const _0x5842bd=_0x1088dc[_0x37d484];var _0x26b173=_0xda4b8a[_0x2f2a75(0x202)](_0x5e4146=>_0x5e4146[_0x2f2a75(0x1bb)]==_0x5842bd),_0x531425=_0x26b173[_0x2f2a75(0x1f3)];_0x1d56ff['io'][_0x2f2a75(0x1f7)]('check_phone_update_'+_0x531425,{'id':_0x5842bd});}}}_0x2410b9();}),_0x1e1f80['removeJobs']('*')['then'](()=>{var _0x1fa72b=_0x361337;!db&&(db=mysql[_0x1fa72b(0x1b7)](config[_0x1fa72b(0x1e4)])),db[_0x1fa72b(0x182)](_0x1fa72b(0x1f0),async(_0x2fc1b0,_0x57e78a)=>{_0x1e1f80['add']({});});});},'allow_process':async(_0x37c7c0,_0xa86345,_0x40a1a5)=>{var _0xee730b=_0x2e8864;repeatallow_process[_0xee730b(0x1d4)]=0x3e8;const _0x1593dd=new Queue(_0xee730b(0x19c),config[_0xee730b(0x1aa)],{'max':0x1,'duration':0x1388,'defaultJobOptions':{'removeOnComplete':!![],'removeOnFail':!![],'repeat':repeatallow_process},'prefix':config[_0xee730b(0x1cb)]??_0xee730b(0x21a)});_0x1593dd[_0xee730b(0x230)](async function(_0x119437,_0x287a50){var _0x55eb9c=_0xee730b;if(!av_av&&myAvatar[_0x55eb9c(0x1e3)]>0x3e8){var _0x2ae8b4=await Extend[_0x55eb9c(0x182)]('SELECT\x20a.changed,\x20a.token\x20as\x20instance_id,\x20a.id,\x20b.ids\x20as\x20access_token\x20FROM\x20sp_accounts\x20as\x20a\x20INNER\x20JOIN\x20sp_team\x20as\x20b\x20ON\x20a.team_id=b.id\x20WHERE\x20a.social_network\x20=\x20\x27whatsapp\x27\x20AND\x20a.login_type\x20=\x20\x272\x27\x20AND\x20a.status\x20=\x201\x20ORDER\x20BY\x20a.changed\x20ASC\x20LIMIT\x201',!![]);if(_0x2ae8b4){var _0x3e0435=new Date()['getTime']()/0x3e8;await Extend[_0x55eb9c(0x1d2)](_0x55eb9c(0x1dc),[{'changed':_0x3e0435},{'id':_0x2ae8b4['id']}]),await _0x37c7c0[_0x55eb9c(0x1c8)](_0x2ae8b4[_0x55eb9c(0x1f8)],_0x2ae8b4[_0x55eb9c(0x228)],![],![],async _0x4ca96d=>{var _0x1f11aa=_0x55eb9c;_0x4ca96d[_0x1f11aa(0x20c)]==undefined&&await _0x37c7c0['relogin'](_0x2ae8b4[_0x1f11aa(0x228)]);});}}_0x287a50();}),_0x1593dd['removeJobs']('*')[_0xee730b(0x1f5)](()=>{var _0x1d4e6a=_0xee730b;!db&&(db=mysql[_0x1d4e6a(0x1b7)](config[_0x1d4e6a(0x1e4)])),_0x1593dd[_0x1d4e6a(0x185)]({});});},'processPf':async _0xa91459=>{var _0x544bf2=_0x2e8864;repeatprocessPf[_0x544bf2(0x1d4)]=0x3e8;const _0x93331c=new Queue('processBulk',config[_0x544bf2(0x1aa)],{'max':0x1,'duration':0x1388,'defaultJobOptions':{'removeOnComplete':!![],'removeOnFail':!![],'repeat':repeatprocessPf},'prefix':config['prefix']??_0x544bf2(0x21a)});_0x93331c[_0x544bf2(0x230)](async function(_0x277467,_0x37f07c){var _0x249f01=_0x544bf2;!av_av&&myAvatar[_0x249f01(0x1e3)]>0x3e8&&await _0xa91459[_0x249f01(0x1bd)](),_0x37f07c();}),_0x93331c[_0x544bf2(0x18e)]('*')['then'](()=>{var _0x11b3ab=_0x544bf2;!db&&(db=mysql['createPool'](config['database'])),_0x93331c[_0x11b3ab(0x185)]({});});},'processAvatar':async()=>{var _0x1d5fc1=_0x2e8864;await get_user_avatar();const _0x33a4e8=new Queue('processAvatar',config[_0x1d5fc1(0x1aa)],{'max':0x1,'duration':0x2710,'defaultJobOptions':{'removeOnComplete':!![],'removeOnFail':!![],'repeat':{'every':0x6ddd00}},'prefix':config[_0x1d5fc1(0x1cb)]??_0x1d5fc1(0x21a)});_0x33a4e8[_0x1d5fc1(0x230)](async function(_0x15c8e9,_0x1f0256){await get_user_avatar(),_0x1f0256();}),_0x33a4e8[_0x1d5fc1(0x18e)]('*')[_0x1d5fc1(0x1f5)](()=>{_0x33a4e8['add']({});});},'processCheck':async(_0x227ff8,_0x554de2)=>{var _0x25b861=_0x2e8864;repeatprocessCheck['every']=0x3e8;const _0x1b4891=new Queue(_0x25b861(0x193),config[_0x25b861(0x1aa)],{'max':0x1,'duration':0x2710,'defaultJobOptions':{'removeOnComplete':!![],'removeOnFail':!![],'repeat':repeatprocessCheck},'prefix':config[_0x25b861(0x1cb)]??_0x25b861(0x21a)});_0x1b4891[_0x25b861(0x230)](async function(_0x30a4fd,_0x2e673b){var _0x3eb46c=_0x25b861;Object[_0x3eb46c(0x213)](_0x554de2)['length']&&Object[_0x3eb46c(0x213)](_0x554de2)[_0x3eb46c(0x20d)](async _0x163815=>{var _0x25bdf4=_0x3eb46c,_0x5d2620=new Date()[_0x25bdf4(0x1be)]()/0x3e8;_0x5d2620>_0x554de2[_0x163815]&&_0x227ff8[_0x163815]&&_0x227ff8[_0x163815][_0x25bdf4(0x1dd)]!=undefined&&(delete _0x554de2[_0x163815],await waziper['logout'](_0x163815));}),console[_0x3eb46c(0x1af)](_0x3eb46c(0x1b5),Object[_0x3eb46c(0x213)](_0x227ff8)[_0x3eb46c(0x1e3)]),console[_0x3eb46c(0x1af)](_0x3eb46c(0x229),Object[_0x3eb46c(0x213)](_0x554de2)[_0x3eb46c(0x1e3)]),_0x2e673b();}),_0x1b4891[_0x25b861(0x18e)]('*')[_0x25b861(0x1f5)](()=>{var _0x3255d2=_0x25b861;_0x1b4891[_0x3255d2(0x185)]({});});},'init':async(_0x48aa43,_0x469b82,_0x48e2c9)=>{var _0x75ae98=_0x2e8864;Extend['processAvatar'](),Extend['processCheck'](_0x469b82,_0x48e2c9),Extend[_0x75ae98(0x204)](_0x48aa43,_0x469b82,_0x48e2c9),Extend[_0x75ae98(0x1ab)](_0x48aa43),Extend[_0x75ae98(0x220)](_0x48aa43,_0x469b82);}};module[_0x2e8864(0x1b9)]=Extend;